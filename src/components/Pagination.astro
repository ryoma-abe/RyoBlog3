---
import { getSortedPosts } from "../lib/blog";
const POSTS_PER_PAGE = 12;
const sortedPosts = await getSortedPosts();
const currentPage = Number(Astro.url.searchParams.get("page") || "1");
const totalPages = Math.ceil(sortedPosts.length / POSTS_PER_PAGE);
---

{
  totalPages > 1 && (
    <div class="flex justify-center gap-4 mt-30">
      {Array.from({ length: totalPages }, (_, i) => {
        const pageNum = i + 1;
        const isCurrent = pageNum === currentPage;
        return (
          <a
            href={`?page=${pageNum}`}
            class={`px-4 py-2 rounded transition ${
              isCurrent
                ? "bg-white text-black font-bold"
                : "bg-gray-700 text-white hover:bg-gray-600"
            }`}
          >
            {pageNum}
          </a>
        );
      })}
    </div>
  )
}
