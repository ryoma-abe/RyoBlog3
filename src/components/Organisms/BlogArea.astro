---
// src/components/Organisms/BlogArea.astro
import { getNotionPosts } from "../../lib/notion";

const posts = await getNotionPosts();

console.log("🔍 Notion から取得した記事:", posts);
---

<section class="max-w-4xl mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-6">Notion 記事一覧</h1>

  {
    posts.length === 0 ? (
      <p>記事が見つかりませんでした。</p>
    ) : (
      <ul class="space-y-4">
        {posts.map((post) => {
          const title = post.properties.title.title[0]?.plain_text ?? "無題";
          const slug = post.properties.slug.rich_text[0]?.plain_text ?? "#";
          const date = post.properties.date.date?.start ?? "日付なし";
          const tags = post.properties.Tags.multi_select
            .map((tag) => tag.name)
            .join(", ");

          return (
            <li class="p-4 border rounded">
              <a
                href={`/${slug}`}
                class="text-lg font-semibold hover:underline"
              >
                {title}
              </a>
              <p class="text-sm text-gray-500">{date}</p>
              <p class="text-sm text-gray-400">{tags}</p>
            </li>
          );
        })}
      </ul>
    )
  }
</section>
